Jenkinsfile:

node{
 stage('SCM Checkout'){
 git credentialsId: 'git-cred', url: 'https://github.com/amitkmr397/Devops.git'
 }
 
 stage('Build Docker Image'){
 sh 'docker build -t amit/testApp'
 }
 
 stage('Testing Docker Image Build')
 {
 sh 'docker ps'
 }
 
 stage('Push Docker Image'){
 withCredentials([string(credentialsId: 'docker-pwd', variable: 'dockerHubPwd')]) {
 
 sh "docker login -u amit -p $dockerHubPwd"
 }
 sh 'docker push amit/app'
 } 
}

 

Dockerfile:
FROM ubuntu:latest

RUN apt-get update
RUN apt-get install -y python python3-pip
RUN pip install Flask

ADD amit.py /home/amit.py

 

WORKDIR /home
Code for hello.py:
#! /usr/local/bin/python3

 

print('Hello, world!')